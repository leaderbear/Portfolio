


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > DialPlot</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">org.jfree.chart.plot.dial</a>
</div>

<h1>Coverage Summary for Class: DialPlot (org.jfree.chart.plot.dial)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">DialPlot</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    38,1%
  </span>
  <span class="absValue">
    (16/42)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    44,2%
  </span>
  <span class="absValue">
    (92/208)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/* ===========================================================
&nbsp; * JFreeChart : a free chart library for the Java(tm) platform
&nbsp; * ===========================================================
&nbsp; *
&nbsp; * (C) Copyright 2000-2022, by David Gilbert and Contributors.
&nbsp; *
&nbsp; * Project Info:  http://www.jfree.org/jfreechart/index.html
&nbsp; *
&nbsp; * This library is free software; you can redistribute it and/or modify it
&nbsp; * under the terms of the GNU Lesser General Public License as published by
&nbsp; * the Free Software Foundation; either version 2.1 of the License, or
&nbsp; * (at your option) any later version.
&nbsp; *
&nbsp; * This library is distributed in the hope that it will be useful, but
&nbsp; * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
&nbsp; * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public
&nbsp; * License for more details.
&nbsp; *
&nbsp; * You should have received a copy of the GNU Lesser General Public
&nbsp; * License along with this library; if not, write to the Free Software
&nbsp; * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
&nbsp; * USA.
&nbsp; *
&nbsp; * [Oracle and Java are registered trademarks of Oracle and/or its affiliates. 
&nbsp; * Other names may be trademarks of their respective owners.]
&nbsp; *
&nbsp; * -------------
&nbsp; * DialPlot.java
&nbsp; * -------------
&nbsp; * (C) Copyright 2006-2022, by David Gilbert.
&nbsp; *
&nbsp; * Original Author:  David Gilbert;
&nbsp; * Contributor(s):   -;
&nbsp; *
&nbsp; */
&nbsp;
&nbsp;package org.jfree.chart.plot.dial;
&nbsp;
&nbsp;import java.awt.Graphics2D;
&nbsp;import java.awt.Shape;
&nbsp;import java.awt.geom.Point2D;
&nbsp;import java.awt.geom.Rectangle2D;
&nbsp;import java.io.IOException;
&nbsp;import java.io.ObjectInputStream;
&nbsp;import java.io.ObjectOutputStream;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.List;
&nbsp;import java.util.Map;
&nbsp;import java.util.Objects;
&nbsp;import org.jfree.chart.ChartElementVisitor;
&nbsp;
&nbsp;import org.jfree.chart.JFreeChart;
&nbsp;import org.jfree.chart.event.PlotChangeEvent;
&nbsp;import org.jfree.chart.plot.Plot;
&nbsp;import org.jfree.chart.plot.PlotRenderingInfo;
&nbsp;import org.jfree.chart.plot.PlotState;
&nbsp;import org.jfree.chart.internal.Args;
&nbsp;import org.jfree.data.general.DatasetChangeEvent;
&nbsp;import org.jfree.data.general.ValueDataset;
&nbsp;
&nbsp;/**
&nbsp; * A dial plot composed of user-definable layers.
&nbsp; * The example shown here is generated by the {@code DialDemo2.java}
&nbsp; * program included in the JFreeChart Demo Collection:
&nbsp; * &lt;br&gt;&lt;br&gt;
&nbsp; * &lt;img src=&quot;doc-files/DialPlotSample.png&quot; alt=&quot;DialPlotSample.png&quot;&gt;
&nbsp; */
&nbsp;public class DialPlot extends Plot implements DialLayerChangeListener {
&nbsp;
&nbsp;    /**
&nbsp;     * The background layer (optional).
&nbsp;     */
&nbsp;    private DialLayer background;
&nbsp;
&nbsp;    /**
&nbsp;     * The needle cap (optional).
&nbsp;     */
&nbsp;    private DialLayer cap;
&nbsp;
&nbsp;    /**
&nbsp;     * The dial frame.
&nbsp;     */
&nbsp;    private DialFrame dialFrame;
&nbsp;
&nbsp;    /**
&nbsp;     * The dataset(s) for the dial plot.
&nbsp;     */
&nbsp;    private Map&lt;Integer, ValueDataset&gt; datasets;
&nbsp;
&nbsp;    /**
&nbsp;     * The scale(s) for the dial plot.
&nbsp;     */
&nbsp;    private Map&lt;Integer, DialScale&gt; scales;
&nbsp;
&nbsp;    /** Storage for keys that map datasets to scales. */
&nbsp;    private Map&lt;Integer, Integer&gt; datasetToScaleMap;
&nbsp;
&nbsp;    /**
&nbsp;     * The drawing layers for the dial plot.
&nbsp;     */
&nbsp;    private List&lt;DialLayer&gt; layers;
&nbsp;
&nbsp;    /**
&nbsp;     * The pointer(s) for the dial.
&nbsp;     */
&nbsp;    private List&lt;DialPointer&gt; pointers;
&nbsp;
&nbsp;    /**
&nbsp;     * The x-coordinate for the view window.
&nbsp;     */
&nbsp;    private double viewX;
&nbsp;
&nbsp;    /**
&nbsp;     * The y-coordinate for the view window.
&nbsp;     */
&nbsp;    private double viewY;
&nbsp;
&nbsp;    /**
&nbsp;     * The width of the view window, expressed as a percentage.
&nbsp;     */
&nbsp;    private double viewW;
&nbsp;
&nbsp;    /**
&nbsp;     * The height of the view window, expressed as a percentage.
&nbsp;     */
&nbsp;    private double viewH;
&nbsp;
&nbsp;    /**
&nbsp;     * Creates a new instance of {@code DialPlot}.
&nbsp;     */
&nbsp;    public DialPlot() {
<b class="fc">&nbsp;        this(null);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates a new instance of {@code DialPlot}.
&nbsp;     *
&nbsp;     * @param dataset  the dataset ({@code null} permitted).
&nbsp;     */
<b class="fc">&nbsp;    public DialPlot(ValueDataset dataset) {</b>
<b class="fc">&nbsp;        this.background = null;</b>
<b class="fc">&nbsp;        this.cap = null;</b>
<b class="fc">&nbsp;        this.dialFrame = new ArcDialFrame();</b>
<b class="fc">&nbsp;        this.datasets = new HashMap&lt;&gt;();</b>
<b class="fc">&nbsp;        if (dataset != null) {</b>
<b class="nc">&nbsp;            setDataset(dataset);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.scales = new HashMap&lt;&gt;();</b>
<b class="fc">&nbsp;        this.datasetToScaleMap = new HashMap&lt;&gt;();</b>
<b class="fc">&nbsp;        this.layers = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.pointers = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        this.viewX = 0.0;</b>
<b class="fc">&nbsp;        this.viewY = 0.0;</b>
<b class="fc">&nbsp;        this.viewW = 1.0;</b>
<b class="fc">&nbsp;        this.viewH = 1.0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the background.
&nbsp;     *
&nbsp;     * @return The background (possibly {@code null}).
&nbsp;     *
&nbsp;     * @see #setBackground(DialLayer)
&nbsp;     */
&nbsp;    public DialLayer getBackground() {
<b class="nc">&nbsp;        return this.background;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the background layer and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param background  the background layer ({@code null} permitted).
&nbsp;     *
&nbsp;     * @see #getBackground()
&nbsp;     */
&nbsp;    public void setBackground(DialLayer background) {
<b class="fc">&nbsp;        if (this.background != null) {</b>
<b class="fc">&nbsp;            this.background.removeChangeListener(this);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.background = background;</b>
<b class="fc">&nbsp;        if (background != null) {</b>
<b class="fc">&nbsp;            background.addChangeListener(this);</b>
&nbsp;        }
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the cap.
&nbsp;     *
&nbsp;     * @return The cap (possibly {@code null}).
&nbsp;     *
&nbsp;     * @see #setCap(DialLayer)
&nbsp;     */
&nbsp;    public DialLayer getCap() {
<b class="nc">&nbsp;        return this.cap;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the cap and sends a {@link PlotChangeEvent} to all registered
&nbsp;     * listeners.
&nbsp;     *
&nbsp;     * @param cap  the cap ({@code null} permitted).
&nbsp;     *
&nbsp;     * @see #getCap()
&nbsp;     */
&nbsp;    public void setCap(DialLayer cap) {
<b class="fc">&nbsp;        if (this.cap != null) {</b>
<b class="fc">&nbsp;            this.cap.removeChangeListener(this);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.cap = cap;</b>
<b class="fc">&nbsp;        if (cap != null) {</b>
<b class="fc">&nbsp;            cap.addChangeListener(this);</b>
&nbsp;        }
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the dial&#39;s frame.
&nbsp;     *
&nbsp;     * @return The dial&#39;s frame (never {@code null}).
&nbsp;     *
&nbsp;     * @see #setDialFrame(DialFrame)
&nbsp;     */
&nbsp;    public DialFrame getDialFrame() {
<b class="nc">&nbsp;        return this.dialFrame;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the dial&#39;s frame and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param frame  the frame ({@code null} not permitted).
&nbsp;     *
&nbsp;     * @see #getDialFrame()
&nbsp;     */
&nbsp;    public void setDialFrame(DialFrame frame) {
<b class="fc">&nbsp;        Args.nullNotPermitted(frame, &quot;frame&quot;);</b>
<b class="fc">&nbsp;        this.dialFrame.removeChangeListener(this);</b>
<b class="fc">&nbsp;        this.dialFrame = frame;</b>
<b class="fc">&nbsp;        frame.addChangeListener(this);</b>
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the x-coordinate of the viewing rectangle.  This is specified
&nbsp;     * in the range 0.0 to 1.0, relative to the dial&#39;s framing rectangle.
&nbsp;     *
&nbsp;     * @return The x-coordinate of the viewing rectangle.
&nbsp;     *
&nbsp;     * @see #setView(double, double, double, double)
&nbsp;     */
&nbsp;    public double getViewX() {
<b class="nc">&nbsp;        return this.viewX;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the y-coordinate of the viewing rectangle.  This is specified
&nbsp;     * in the range 0.0 to 1.0, relative to the dial&#39;s framing rectangle.
&nbsp;     *
&nbsp;     * @return The y-coordinate of the viewing rectangle.
&nbsp;     *
&nbsp;     * @see #setView(double, double, double, double)
&nbsp;     */
&nbsp;    public double getViewY() {
<b class="nc">&nbsp;        return this.viewY;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the width of the viewing rectangle.  This is specified
&nbsp;     * in the range 0.0 to 1.0, relative to the dial&#39;s framing rectangle.
&nbsp;     *
&nbsp;     * @return The width of the viewing rectangle.
&nbsp;     *
&nbsp;     * @see #setView(double, double, double, double)
&nbsp;     */
&nbsp;    public double getViewWidth() {
<b class="nc">&nbsp;        return this.viewW;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the height of the viewing rectangle.  This is specified
&nbsp;     * in the range 0.0 to 1.0, relative to the dial&#39;s framing rectangle.
&nbsp;     *
&nbsp;     * @return The height of the viewing rectangle.
&nbsp;     *
&nbsp;     * @see #setView(double, double, double, double)
&nbsp;     */
&nbsp;    public double getViewHeight() {
<b class="nc">&nbsp;        return this.viewH;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the viewing rectangle, relative to the dial&#39;s framing rectangle,
&nbsp;     * and sends a {@link PlotChangeEvent} to all registered listeners.
&nbsp;     *
&nbsp;     * @param x  the x-coordinate (in the range 0.0 to 1.0).
&nbsp;     * @param y  the y-coordinate (in the range 0.0 to 1.0).
&nbsp;     * @param w  the width (in the range 0.0 to 1.0).
&nbsp;     * @param h  the height (in the range 0.0 to 1.0).
&nbsp;     *
&nbsp;     * @see #getViewX()
&nbsp;     * @see #getViewY()
&nbsp;     * @see #getViewWidth()
&nbsp;     * @see #getViewHeight()
&nbsp;     */
&nbsp;    public void setView(double x, double y, double w, double h) {
<b class="fc">&nbsp;        this.viewX = x;</b>
<b class="fc">&nbsp;        this.viewY = y;</b>
<b class="fc">&nbsp;        this.viewW = w;</b>
<b class="fc">&nbsp;        this.viewH = h;</b>
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a layer to the plot and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param layer  the layer ({@code null} not permitted).
&nbsp;     */
&nbsp;    public void addLayer(DialLayer layer) {
<b class="fc">&nbsp;        Args.nullNotPermitted(layer, &quot;layer&quot;);</b>
<b class="fc">&nbsp;        this.layers.add(layer);</b>
<b class="fc">&nbsp;        layer.addChangeListener(this);</b>
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the index for the specified layer.
&nbsp;     *
&nbsp;     * @param layer  the layer ({@code null} not permitted).
&nbsp;     *
&nbsp;     * @return The layer index.
&nbsp;     */
&nbsp;    public int getLayerIndex(DialLayer layer) {
<b class="fc">&nbsp;        Args.nullNotPermitted(layer, &quot;layer&quot;);</b>
<b class="fc">&nbsp;        return this.layers.indexOf(layer);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Removes the layer at the specified index and sends a
&nbsp;     * {@link PlotChangeEvent} to all registered listeners.
&nbsp;     *
&nbsp;     * @param index  the index.
&nbsp;     */
&nbsp;    public void removeLayer(int index) {
<b class="fc">&nbsp;        DialLayer layer = this.layers.get(index);</b>
<b class="fc">&nbsp;        if (layer != null) {</b>
<b class="fc">&nbsp;            layer.removeChangeListener(this);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.layers.remove(index);</b>
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Removes the specified layer and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param layer  the layer ({@code null} not permitted).
&nbsp;     */
&nbsp;    public void removeLayer(DialLayer layer) {
&nbsp;        // defer argument checking
<b class="fc">&nbsp;        removeLayer(getLayerIndex(layer));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a pointer to the plot and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param pointer  the pointer ({@code null} not permitted).
&nbsp;     */
&nbsp;    public void addPointer(DialPointer pointer) {
<b class="nc">&nbsp;        Args.nullNotPermitted(pointer, &quot;pointer&quot;);</b>
<b class="nc">&nbsp;        this.pointers.add(pointer);</b>
<b class="nc">&nbsp;        pointer.addChangeListener(this);</b>
<b class="nc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the index for the specified pointer.
&nbsp;     *
&nbsp;     * @param pointer  the pointer ({@code null} not permitted).
&nbsp;     *
&nbsp;     * @return The pointer index.
&nbsp;     */
&nbsp;    public int getPointerIndex(DialPointer pointer) {
<b class="nc">&nbsp;        Args.nullNotPermitted(pointer, &quot;pointer&quot;);</b>
<b class="nc">&nbsp;        return this.pointers.indexOf(pointer);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Removes the pointer at the specified index and sends a
&nbsp;     * {@link PlotChangeEvent} to all registered listeners.
&nbsp;     *
&nbsp;     * @param index  the index.
&nbsp;     */
&nbsp;    public void removePointer(int index) {
<b class="nc">&nbsp;        DialPointer pointer = this.pointers.get(index);</b>
<b class="nc">&nbsp;        if (pointer != null) {</b>
<b class="nc">&nbsp;            pointer.removeChangeListener(this);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.pointers.remove(index);</b>
<b class="nc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Removes the specified pointer and sends a {@link PlotChangeEvent} to all
&nbsp;     * registered listeners.
&nbsp;     *
&nbsp;     * @param pointer  the pointer ({@code null} not permitted).
&nbsp;     */
&nbsp;    public void removePointer(DialPointer pointer) {
&nbsp;        // defer argument checking
<b class="nc">&nbsp;        removeLayer(getPointerIndex(pointer));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the dial pointer that is associated with the specified
&nbsp;     * dataset, or {@code null}.
&nbsp;     *
&nbsp;     * @param datasetIndex  the dataset index.
&nbsp;     *
&nbsp;     * @return The pointer.
&nbsp;     */
&nbsp;    public DialPointer getPointerForDataset(int datasetIndex) {
<b class="nc">&nbsp;        DialPointer result = null;</b>
<b class="nc">&nbsp;        for (DialPointer p : this.pointers) {</b>
<b class="nc">&nbsp;            if (p.getDatasetIndex() == datasetIndex) {</b>
<b class="nc">&nbsp;                return p;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the primary dataset for the plot.
&nbsp;     *
&nbsp;     * @return The primary dataset (possibly {@code null}).
&nbsp;     */
&nbsp;    public ValueDataset getDataset() {
<b class="nc">&nbsp;        return getDataset(0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the dataset at the given index.
&nbsp;     *
&nbsp;     * @param index  the dataset index.
&nbsp;     *
&nbsp;     * @return The dataset (possibly {@code null}).
&nbsp;     */
&nbsp;    public ValueDataset getDataset(int index) {
<b class="nc">&nbsp;        ValueDataset result = null;</b>
<b class="nc">&nbsp;        if (this.datasets.size() &gt; index) {</b>
<b class="nc">&nbsp;            result = (ValueDataset) this.datasets.get(index);</b>
&nbsp;        }
<b class="nc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the dataset for the plot, replacing the existing dataset, if there
&nbsp;     * is one, and sends a {@link PlotChangeEvent} to all registered
&nbsp;     * listeners.
&nbsp;     *
&nbsp;     * @param dataset  the dataset ({@code null} permitted).
&nbsp;     */
&nbsp;    public void setDataset(ValueDataset dataset) {
<b class="nc">&nbsp;        setDataset(0, dataset);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets a dataset for the plot.
&nbsp;     *
&nbsp;     * @param index  the dataset index.
&nbsp;     * @param dataset  the dataset ({@code null} permitted).
&nbsp;     */
&nbsp;    public void setDataset(int index, ValueDataset dataset) {
<b class="nc">&nbsp;        ValueDataset existing = this.datasets.get(index);</b>
<b class="nc">&nbsp;        if (existing != null) {</b>
<b class="nc">&nbsp;            existing.removeChangeListener(this);</b>
&nbsp;        }
<b class="nc">&nbsp;        this.datasets.put(index, dataset);</b>
<b class="nc">&nbsp;        if (dataset != null) {</b>
<b class="nc">&nbsp;            dataset.addChangeListener(this);</b>
&nbsp;        }
&nbsp;
&nbsp;        // send a dataset change event to self...
<b class="nc">&nbsp;        DatasetChangeEvent event = new DatasetChangeEvent(this, dataset);</b>
<b class="nc">&nbsp;        datasetChanged(event);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of datasets.
&nbsp;     *
&nbsp;     * @return The number of datasets.
&nbsp;     */
&nbsp;    public int getDatasetCount() {
<b class="nc">&nbsp;        return this.datasets.size();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Receives a chart element visitor.  Many plot subclasses will override
&nbsp;     * this method to handle their subcomponents.
&nbsp;     * 
&nbsp;     * @param visitor  the visitor ({@code null} not permitted).
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void receive(ChartElementVisitor visitor) {
&nbsp;        // FIXME : handle the subcomponents
<b class="nc">&nbsp;        super.receive(visitor);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Draws the plot.  This method is usually called by the {@link JFreeChart}
&nbsp;     * instance that manages the plot.
&nbsp;     *
&nbsp;     * @param g2  the graphics target.
&nbsp;     * @param area  the area in which the plot should be drawn.
&nbsp;     * @param anchor  the anchor point (typically the last point that the
&nbsp;     *     mouse clicked on, {@code null} is permitted).
&nbsp;     * @param parentState  the state for the parent plot (if any).
&nbsp;     * @param info  used to collect plot rendering info ({@code null}
&nbsp;     *     permitted).
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void draw(Graphics2D g2, Rectangle2D area, Point2D anchor,
&nbsp;            PlotState parentState, PlotRenderingInfo info) {
&nbsp;
<b class="nc">&nbsp;        Shape origClip = g2.getClip();</b>
<b class="nc">&nbsp;        g2.setClip(area);</b>
&nbsp;
&nbsp;        // first, expand the viewing area into a drawing frame
<b class="nc">&nbsp;        Rectangle2D frame = viewToFrame(area);</b>
&nbsp;
&nbsp;        // draw the background if there is one...
<b class="nc">&nbsp;        if (this.background != null &amp;&amp; this.background.isVisible()) {</b>
<b class="nc">&nbsp;            if (this.background.isClippedToWindow()) {</b>
<b class="nc">&nbsp;                Shape savedClip = g2.getClip();</b>
<b class="nc">&nbsp;                g2.clip(this.dialFrame.getWindow(frame));</b>
<b class="nc">&nbsp;                this.background.draw(g2, this, frame, area);</b>
<b class="nc">&nbsp;                g2.setClip(savedClip);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            else {
<b class="nc">&nbsp;                this.background.draw(g2, this, frame, area);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (DialLayer current : this.layers) {</b>
<b class="nc">&nbsp;            if (current.isVisible()) {</b>
<b class="nc">&nbsp;                if (current.isClippedToWindow()) {</b>
<b class="nc">&nbsp;                    Shape savedClip = g2.getClip();</b>
<b class="nc">&nbsp;                    g2.clip(this.dialFrame.getWindow(frame));</b>
<b class="nc">&nbsp;                    current.draw(g2, this, frame, area);</b>
<b class="nc">&nbsp;                    g2.setClip(savedClip);</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                else {
<b class="nc">&nbsp;                    current.draw(g2, this, frame, area);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // draw the pointers
<b class="nc">&nbsp;        for (DialPointer current : this.pointers) {</b>
<b class="nc">&nbsp;            if (current.isVisible()) {</b>
<b class="nc">&nbsp;                if (current.isClippedToWindow()) {</b>
<b class="nc">&nbsp;                    Shape savedClip = g2.getClip();</b>
<b class="nc">&nbsp;                    g2.clip(this.dialFrame.getWindow(frame));</b>
<b class="nc">&nbsp;                    current.draw(g2, this, frame, area);</b>
<b class="nc">&nbsp;                    g2.setClip(savedClip);</b>
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    current.draw(g2, this, frame, area);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // draw the cap if there is one...
<b class="nc">&nbsp;        if (this.cap != null &amp;&amp; this.cap.isVisible()) {</b>
<b class="nc">&nbsp;            if (this.cap.isClippedToWindow()) {</b>
<b class="nc">&nbsp;                Shape savedClip = g2.getClip();</b>
<b class="nc">&nbsp;                g2.clip(this.dialFrame.getWindow(frame));</b>
<b class="nc">&nbsp;                this.cap.draw(g2, this, frame, area);</b>
<b class="nc">&nbsp;                g2.setClip(savedClip);</b>
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                this.cap.draw(g2, this, frame, area);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (this.dialFrame.isVisible()) {</b>
<b class="nc">&nbsp;            this.dialFrame.draw(g2, this, frame, area);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        g2.setClip(origClip);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the frame surrounding the specified view rectangle.
&nbsp;     *
&nbsp;     * @param view  the view rectangle ({@code null} not permitted).
&nbsp;     *
&nbsp;     * @return The frame rectangle.
&nbsp;     */
&nbsp;    private Rectangle2D viewToFrame(Rectangle2D view) {
<b class="nc">&nbsp;        double width = view.getWidth() / this.viewW;</b>
<b class="nc">&nbsp;        double height = view.getHeight() / this.viewH;</b>
<b class="nc">&nbsp;        double x = view.getX() - (width * this.viewX);</b>
<b class="nc">&nbsp;        double y = view.getY() - (height * this.viewY);</b>
<b class="nc">&nbsp;        return new Rectangle2D.Double(x, y, width, height);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the value from the specified dataset.
&nbsp;     *
&nbsp;     * @param datasetIndex  the dataset index.
&nbsp;     *
&nbsp;     * @return The data value.
&nbsp;     */
&nbsp;    public double getValue(int datasetIndex) {
<b class="nc">&nbsp;        double result = Double.NaN;</b>
<b class="nc">&nbsp;        ValueDataset dataset = getDataset(datasetIndex);</b>
<b class="nc">&nbsp;        if (dataset != null) {</b>
<b class="nc">&nbsp;            Number n = dataset.getValue();</b>
<b class="nc">&nbsp;            if (n != null) {</b>
<b class="nc">&nbsp;                result = n.doubleValue();</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a dial scale to the plot and sends a {@link PlotChangeEvent} to
&nbsp;     * all registered listeners.
&nbsp;     *
&nbsp;     * @param index  the scale index.
&nbsp;     * @param scale  the scale ({@code null} not permitted).
&nbsp;     */
&nbsp;    public void addScale(int index, DialScale scale) {
<b class="fc">&nbsp;        Args.nullNotPermitted(scale, &quot;scale&quot;);</b>
<b class="fc">&nbsp;        DialScale existing = this.scales.get(index);</b>
<b class="fc">&nbsp;        if (existing != null) {</b>
<b class="fc">&nbsp;            removeLayer(existing);</b>
&nbsp;        }
<b class="fc">&nbsp;        this.layers.add(scale);</b>
<b class="fc">&nbsp;        this.scales.put(index, scale);</b>
<b class="fc">&nbsp;        scale.addChangeListener(this);</b>
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the scale at the given index.
&nbsp;     *
&nbsp;     * @param index  the scale index.
&nbsp;     *
&nbsp;     * @return The scale (possibly {@code null}).
&nbsp;     */
&nbsp;    public DialScale getScale(int index) {
<b class="nc">&nbsp;        return this.scales.get(index);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Maps a dataset to a particular scale.
&nbsp;     *
&nbsp;     * @param index  the dataset index (zero-based).
&nbsp;     * @param scaleIndex  the scale index (zero-based).
&nbsp;     */
&nbsp;    public void mapDatasetToScale(int index, int scaleIndex) {
<b class="nc">&nbsp;        this.datasetToScaleMap.put(index, scaleIndex);</b>
<b class="nc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the dial scale for a specific dataset.
&nbsp;     *
&nbsp;     * @param datasetIndex  the dataset index.
&nbsp;     *
&nbsp;     * @return The dial scale.
&nbsp;     */
&nbsp;    public DialScale getScaleForDataset(int datasetIndex) {
<b class="nc">&nbsp;        DialScale result = this.scales.get(0);</b>
<b class="nc">&nbsp;        Integer scaleIndex = this.datasetToScaleMap.get(datasetIndex);</b>
<b class="nc">&nbsp;        if (scaleIndex != null) {</b>
<b class="nc">&nbsp;            result = getScale(scaleIndex);</b>
&nbsp;        }
<b class="nc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * A utility method that computes a rectangle using relative radius values.
&nbsp;     *
&nbsp;     * @param rect  the reference rectangle ({@code null} not permitted).
&nbsp;     * @param radiusW  the width radius (must be &amp;gt; 0.0)
&nbsp;     * @param radiusH  the height radius.
&nbsp;     *
&nbsp;     * @return A new rectangle.
&nbsp;     */
&nbsp;    public static Rectangle2D rectangleByRadius(Rectangle2D rect,
&nbsp;            double radiusW, double radiusH) {
<b class="nc">&nbsp;        Args.nullNotPermitted(rect, &quot;rect&quot;);</b>
<b class="nc">&nbsp;        double x = rect.getCenterX();</b>
<b class="nc">&nbsp;        double y = rect.getCenterY();</b>
<b class="nc">&nbsp;        double w = rect.getWidth() * radiusW;</b>
<b class="nc">&nbsp;        double h = rect.getHeight() * radiusH;</b>
<b class="nc">&nbsp;        return new Rectangle2D.Double(x - w / 2.0, y - h / 2.0, w, h);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Receives notification when a layer has changed, and responds by
&nbsp;     * forwarding a {@link PlotChangeEvent} to all registered listeners.
&nbsp;     *
&nbsp;     * @param event  the event.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void dialLayerChanged(DialLayerChangeEvent event) {
<b class="fc">&nbsp;        fireChangeEvent();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tests this {@code DialPlot} instance for equality with an
&nbsp;     * arbitrary object.  The plot&#39;s dataset(s) is (are) not included in
&nbsp;     * the test.
&nbsp;     *
&nbsp;     * @param obj  the object ({@code null} permitted).
&nbsp;     *
&nbsp;     * @return A boolean.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean equals(Object obj) {
<b class="fc">&nbsp;        if (obj == this) {</b>
<b class="fc">&nbsp;            return true;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!(obj instanceof DialPlot)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        DialPlot that = (DialPlot) obj;</b>
<b class="fc">&nbsp;        if (!Objects.equals(this.background, that.background)) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!Objects.equals(this.cap, that.cap)) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!this.dialFrame.equals(that.dialFrame)) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (this.viewX != that.viewX) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (this.viewY != that.viewY) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (this.viewW != that.viewW) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (this.viewH != that.viewH) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!this.layers.equals(that.layers)) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!this.pointers.equals(that.pointers)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        return super.equals(obj);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns a hash code for this instance.
&nbsp;     *
&nbsp;     * @return The hash code.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public int hashCode() {
<b class="fc">&nbsp;        int result = 193;</b>
<b class="fc">&nbsp;        result = 37 * result + Objects.hashCode(this.background);</b>
<b class="fc">&nbsp;        result = 37 * result + Objects.hashCode(this.cap);</b>
<b class="fc">&nbsp;        result = 37 * result + this.dialFrame.hashCode();</b>
<b class="fc">&nbsp;        long temp = Double.doubleToLongBits(this.viewX);</b>
<b class="fc">&nbsp;        result = 37 * result + (int) (temp ^ (temp &gt;&gt;&gt; 32));</b>
<b class="fc">&nbsp;        temp = Double.doubleToLongBits(this.viewY);</b>
<b class="fc">&nbsp;        result = 37 * result + (int) (temp ^ (temp &gt;&gt;&gt; 32));</b>
<b class="fc">&nbsp;        temp = Double.doubleToLongBits(this.viewW);</b>
<b class="fc">&nbsp;        result = 37 * result + (int) (temp ^ (temp &gt;&gt;&gt; 32));</b>
<b class="fc">&nbsp;        temp = Double.doubleToLongBits(this.viewH);</b>
<b class="fc">&nbsp;        result = 37 * result + (int) (temp ^ (temp &gt;&gt;&gt; 32));</b>
<b class="fc">&nbsp;        return result;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the plot type.
&nbsp;     *
&nbsp;     * @return {@code &quot;DialPlot&quot;}
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String getPlotType() {
<b class="nc">&nbsp;        return &quot;DialPlot&quot;;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Provides serialization support.
&nbsp;     *
&nbsp;     * @param stream  the output stream.
&nbsp;     *
&nbsp;     * @throws IOException  if there is an I/O error.
&nbsp;     */
&nbsp;    private void writeObject(ObjectOutputStream stream) throws IOException {
<b class="fc">&nbsp;        stream.defaultWriteObject();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Provides serialization support.
&nbsp;     *
&nbsp;     * @param stream  the input stream.
&nbsp;     *
&nbsp;     * @throws IOException  if there is an I/O error.
&nbsp;     * @throws ClassNotFoundException  if there is a classpath problem.
&nbsp;     */
&nbsp;    private void readObject(ObjectInputStream stream)
&nbsp;            throws IOException, ClassNotFoundException {
<b class="fc">&nbsp;        stream.defaultReadObject();</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2022-10-20 10:57</div>
</div>
</body>
</html>
